!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="9bbec6c8-3f53-45f5-b010-a2d155b7ae50",e._sentryDebugIdIdentifier="sentry-dbid-9bbec6c8-3f53-45f5-b010-a2d155b7ae50")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"d9db2a99"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3939],{46612:function(e,n,t){"use strict";t.d(n,{he:function(){return a},rc:function(){return c}});var r=t(6955),o=t(14224),i=t(91620).Buffer;function a(e){var n=e.split(".");if(4!==n.length)throw Error("Invalid token: should have exactly 4 parts: "+e);for(var t=n[2].replace(/-/g,"+").replace(/_/g,"/");t.length%4;)t+="=";var o=window.atob(t);if(o.length<64)throw Error("Invalid token: signed part is too short: "+o.length);var a=o.substring(0,o.length-64);return r.api.token.ReplToken.decode(new i(a,"base64"))}function c(e){return e.dotdevHostname.endsWith(".localhost")?"http://".concat(e.dotdevHostname,":8081"):"https://".concat(e.dotdevHostname)}o.env.PROXY_SUFFIX},55947:function(e,n,t){"use strict";t.d(n,{d:function(){return s},u:function(){return c}});var r=t(84750),o=t(5093),i=t(96583),a=t(75271);function c(){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(){return(0,i.Jh)(this,function(e){return"undefined"!=typeof document&&document.hidden?[2,new Promise(function(e){var n=function(){document.hidden||(document.removeEventListener("visibilitychange",n),e())};document.addEventListener("visibilitychange",n)})]:[2]})})).apply(this,arguments)}function s(){var e=(0,o._)((0,a.useState)(!1),2),n=e[0],t=e[1];return(0,a.useEffect)(function(){var e=function(){t(!document.hidden)};return document.addEventListener("visibilitychange",e),e(),function(){document.removeEventListener("visibilitychange",e)}},[]),n}},42682:function(e,n,t){"use strict";t.d(n,{ZP:function(){return p},em:function(){return g.e}});var r=t(84750),o=t(96583),i=t(52158),a=t.n(i),c=t(99970),u=t(54670),s=t(20885),f=t(46612),l=t(55947),d=t(69861),h=t(16697),g=t(68066);function p(e){var n,t,i=e.onUnrecoverableError,g=e.ctx,p={register:function(e,r){return t(),window.addEventListener("online",e),window.addEventListener("offline",r),n=function(){window.removeEventListener("online",e),window.removeEventListener("offline",r)},t},unregister:t=function(){n&&(n(),n=void 0)}},v=p.register,m=p.unregister;return(0,u.ZP)({fetchConnectionMetadata:d.Z,getOverrideClusterMetadata:h.Z,getDotdevUrl:f.rc,logger:s.kg,onUnrecoverableError:i,performance:window.performance,preFetchConnectionMetadata:(0,r._)(function(){var e;return(0,o.Jh)(this,function(n){switch(n.label){case 0:if(window.performance.clearMarks(c.Iy.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(c.Iy.fetchConnectionMetadataPageInvisibleEnd),e=s.kg.timeStart(),window.performance.mark(c.Iy.fetchConnectionMetadataPageInvisibleStart),!("/migrateReplToNix"!==a().pathname))return[3,2];return[4,(0,l.u)()];case 1:n.sent(),n.label=2;case 2:window.performance.mark(c.Iy.fetchConnectionMetadataPageInvisibleEnd),e("page visible fetch connection metadata"),n.label=3;case 3:return[2]}})}),registerReconnectionMonitor:v,unregisterReconnectionMonitor:m,traceCtx:g})}},51603:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(90223),o=t(49695),i=t(91620).Buffer,a=function(){function e(n,t){if((0,r._)(this,e),this.asEncoding={},this.asBuffer=null,t&&"string"==typeof n)this.asEncoding[t]=n;else if(null==n)this.asBuffer=i.alloc(0);else if(n instanceof i)this.asBuffer=n;else if("string"==typeof n)this.asEncoding.utf8=n;else if(n instanceof ArrayBuffer)this.asBuffer=i.from(n);else{if(n instanceof e)return n;n instanceof Uint8Array?this.asBuffer=i.from(n):"object"==typeof n&&"object"==typeof n.asEncoding&&null!==n.asEncoding&&(n.asBuffer instanceof i||null===n.asBuffer)&&(this.asBuffer=n.asBuffer||null,"string"==typeof n.asEncoding.base64&&(this.asEncoding={base64:n.asEncoding.base64}),"string"==typeof n.asEncoding.utf8&&(this.asEncoding={utf8:n.asEncoding.utf8}))}}var n=e.prototype;return n.toString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf8";if(void 0!==this.asEncoding[e])return this.asEncoding[e];var n=this.toBuffer().toString(e);return this.asEncoding[e]=n,n},n.toJSON=function(){return{asEncoding:{base64:this.toString("base64")},asBuffer:null}},n.toBuffer=function(){if(this.asBuffer)return this.asBuffer;for(var e in this.asEncoding){var n=this.asEncoding[e];if("string"==typeof n){var t=i.from(n,e);return this.asBuffer=t,t}}return this.asBuffer=i.alloc(0),this.asBuffer},e.from=function(n,t){return new e(n,t)},e.isBuffer=function(n){return n instanceof e},(0,o._)(e,[{key:"length",get:function(){return void 0!==this.asEncoding.utf8?this.asEncoding.utf8.length:this.toBuffer().length}}]),e}()},9679:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(82271),o=t(58655);function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{wait:0},t=null,i=null,a=null,c=null;if(n.wait<0)throw Error("wait must be 0 or more");if(n.maxWait){if(n.maxWait<0)throw Error("maxWait must be 0 or more");if(n.maxWait<n.wait)throw Error("maxWait must be higher than wait")}function u(){i&&clearTimeout(i),i=null,c=null,t=null,a=null}function s(){if(!t||!i)throw Error("Expected to call debounced function once before flushing");var n=t,o=c;return u(),e.apply(void 0,(0,r._)(o)).then(function(e){return n.resolve(e),e}).catch(function(e){throw n.reject(e),e})}return Object.assign(function(){for(var e=arguments.length,r=Array(e),u=0;u<e;u++)r[u]=arguments[u];if(t){if(!i)throw Error("Did not expect to have deferred and no timeout");clearTimeout(i)}else t=(0,o.Z)(),a=Date.now();return c=r,i=setTimeout(function(){s()},function(){if(!n.maxWait)return n.wait;if(!a)throw Error("Expected scheduledAt to be a set when getting wait");var e=Date.now()-a;return Math.min(n.maxWait-e,n.wait)}()),t.promise},{isScheduled:function(){return!!(t&&i)},cancel:function(){if(!i||!t)throw Error("Expected to call debounced function once before cancelling");var e=t;u(),e.reject(Error("Debounced function cancelled"))},flush:s})}},19031:function(e,n,t){"use strict";t.d(n,{F:function(){return i}});var r=t(39650),o=t(80403);function i(e,n){var t=[],i=!0,a=!1,c=void 0;try{for(var u,s=(0,r.Hg)(e.toString(),n.toString())[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var f=u.value,l=f.fromA,d=f.fromB,h=f.toA,g=f.toB;l===h&&t.push({from:l,insert:n.slice(d,g)}),d===g&&t.push({from:l,to:h,insert:""}),l!==h&&d!==g&&t.push({from:l,to:h,insert:n.slice(d,g)})}}catch(e){a=!0,c=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw c}}return o.as.of(t,e.length)}},98736:function(e,n,t){"use strict";t.d(n,{JV:function(){return i},ZP:function(){return o}});var r=t(72100);function o(){return new r.EventEmitter}function i(e,n){return function(t){return e.on(n,t),function(){e.off(n,t)}}}},58655:function(e,n,t){"use strict";function r(){var e,n,t={promise:new Promise(function(t,r){e=t,n=r}),resolve:function(n){t.isFulfilled=!0,e(n)},reject:function(e){t.isFulfilled=!0,n(e)},isFulfilled:!1};return t}t.d(n,{Z:function(){return r}})},71715:function(e,n,t){"use strict";t.d(n,{DW:function(){return g},GK:function(){return f},Rg:function(){return m},T0:function(){return u},eh:function(){return v},nO:function(){return d}});var r=t(84750),o=t(96583),i=t(85633),a=t(51305),c=t(18293),u="repl.it-web",s=i.g.getTracer(u);function f(e,n){return l.apply(this,arguments)}function l(){return(l=(0,r._)(function(e,n){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,d(a.D.active(),e,n)];case 1:return[2,t.sent()]}})})).apply(this,arguments)}function d(e,n,t){return h.apply(this,arguments)}function h(){return(h=(0,r._)(function(e,n,t){var r,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:r=s.startSpan(n,void 0,e),a=i.g.setSpan(e,r),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,t(a)];case 2:return[2,o.sent()];case 3:return r.end(),[7];case 4:return[2]}})})).apply(this,arguments)}function g(e,n,t){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e,n,t){var r,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(void 0!==e)return[3,2];return[4,t()];case 1:return[2,o.sent()];case 2:r=s.startSpan(n,void 0,e),a=i.g.setSpan(e,r),o.label=3;case 3:return o.trys.push([3,,5,6]),[4,t(a,r)];case 4:return[2,o.sent()];case 5:return r.end(),[7];case 6:return[2]}})})).apply(this,arguments)}function v(e,n){var t=s.startSpan(n,void 0,e),r=i.g.setSpan(e,t);return{span:t,childCtx:r}}function m(e){var n={};return new c.jf().inject(e,n,{set:function(e,n,t){e[n]=t}}),n}},54670:function(e,n,t){"use strict";t.d(n,{em:function(){return y.e},Y8:function(){return _},ZP:function(){return M}});var r=t(84750),o=t(94213),i=t(32586),a=t(25659),c=t(82271),u=t(96583),s=t(25722),f=t(89232),l=t.n(f),d=t(22400),h=t(6955),g=t(98736),p=t(71715),v=t(72672),m=t(32319);function b(e){return w.apply(this,arguments)}function w(){return(w=(0,r._)(function(e){var n,t,r,o;return(0,u.Jh)(this,function(i){return n=e.client,t=e.args,r=e.env,o=e.noUserEnv,[2,new Promise(function(e){var i=n.openChannel({service:"exec"},function(n){var a=n.channel,c="";a.onCommand(function(e){e.output&&(c+=e.output)}),a.request({exec:{args:t,env:r,noUserEnv:null!=o&&o}}).then(function(n){if(n.channelClosed){e({error:"Channel closed",output:c||null});return}if("open"===a.status&&i(),n.error){e({error:n.error,output:c||null});return}e({output:c,error:null})})})})]})})).apply(this,arguments)}var E=t(6882),y=t(68066),C=t(49500),_=5900,S=.1>=Math.random();function O(e){return Math.min(1e3*Math.pow(2,e),6e4)+Math.floor(500*Math.random())}function M(e){var n,t=e.fetchConnectionMetadata,f=e.getOverrideClusterMetadata,w=e.getDotdevUrl,M=e.logger,x=e.onUnrecoverableError,T=e.performance,R=e.preFetchConnectionMetadata,k=e.registerReconnectionMonitor,P=e.unregisterReconnectionMonitor,N=e.crosisTimeout,D=e.crosisWebSocketClass,L=e.traceCtx,A=(0,g.ZP)();A.setMaxListeners(1e3);var I=null,B=new d.KU;B.setUnrecoverableErrorHandler(x),B.onDebugLog(function(e){if("breadcrumb"===e.type){n="container:state"===e.message?{containerState:e.data}:"data"in e?e.data:void 0,s.n_({category:"crosisV6",message:e.message,data:n});var n,t={replid:null==I?void 0:I.repl.id,language:null==I?void 0:I.repl.language};switch(e.message){case"timeout:hit":M.error("crosis connect timeout",t);break;case"onUnrecoverableError":var r=(0,o._)({errorMessage:e.data.message},t);M.error("crosis unrecoverable error",r);break;case"status:retrying":var i=e.data,c=i.error,u=(0,a._)(i,["error"]),f=(0,o._)({errorMessage:c.message},t,u);M.error("crosis retrying",f);break;case"status:connecting":case"status:reconnecting":var l=e.message.split(":")[1];M.info("crosis ".concat(l),(0,o._)({},t,"data"in e?e.data:void 0));break;case"websocket:polling fallback":M.info("crosis polling fallback",(0,o._)({},t))}}});var F=window.location.search.includes("debug=1");F&&B.onDebugLog(function(e){"log"===e.type&&C.log("in"===e.log.direction?"-->":"<--",e.log.channel.service,{cmd:e.log.cmd,channel:e.log.channel})});var U=function(e){var n=void 0;if(void 0!==L&&e.service){var t="";"string"==typeof e.service?t=e.service:I&&(t=e.service(I)),t&&(n=(0,p.eh)(L,"container.".concat(t,".openChannel")).span)}return n};return{logger:M,performance:T,onPortOpened:function(e){return A.on(y.z.PORT_OPEN,e),function(){A.removeListener(y.z.PORT_OPEN,e)}},onPortClosed:function(e){return A.on(y.z.PORT_CLOSE,e),function(){A.removeListener(y.z.PORT_CLOSE,e)}},onToast:function(e){return A.on(y.z.TOAST,e),function(){A.removeListener(y.z.TOAST,e)}},onConnectionStateChanged:function(e){return B.onConnectionStateChange(e)},connect:function(e){var n,s,g=this,p=e.context,b=e.fetchConnectionMetadataExtras,w=e.getMinimumRetryDelayMs,P=(0,a._)(e,["context","fetchConnectionMetadataExtras","getMinimumRetryDelayMs"]);B.getConnectionState()!==y.e.DISCONNECTED&&B.close(),I=p,k(function(){B.getConnectionState()===y.e.DISCONNECTED&&g.connect((0,o._)({context:p,fetchConnectionMetadataExtras:b,getMinimumRetryDelayMs:w},P))},function(){B.getConnectionState()!==y.e.DISCONNECTED&&g.close({expectReconnect:!0})});var L=this,U=(n=(0,r._)(function(e){var n,t,r,i,a,c;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(n=e.chan0,t=e.gurl,r=e.isFirst,"open"!==n.status)return[2];return i=M.timeStart({gurl:t}),a=setTimeout(function(){M.error("ping with no response",{gurl:t}),L.connect((0,o._)({context:p,fetchConnectionMetadataExtras:b,getMinimumRetryDelayMs:w},P))},3e4),[4,n.request({ping:{}})];case 1:if(c=u.sent().channelClosed,clearTimeout(a),c)return[2];return r?i("latency to pid1",{type:"startup"}):S&&i("latency to pid1",{type:"periodic"}),setTimeout(function(){return U({chan0:n,gurl:t,isFirst:!1})},1e3),[2]}})}),function(e){return n.apply(this,arguments)}),W={getNextRetryDelayMs:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return Math.max(O.apply(void 0,(0,c._)(n)),w())},context:p,reuseConnectionMetadata:!0,fetchConnectionMetadata:(s=(0,r._)(function(e){var n,r,a,c,s,l;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if("function"!=typeof R)return[3,2];return[4,R()];case 1:u.sent(),u.label=2;case 2:if("function"!=typeof f)return[3,4];return[4,f()];case 3:return r=u.sent(),[3,5];case 4:r=null,u.label=5;case 5:if(n=r,e.aborted)return[2,{error:d.gS.Aborted}];a=M.timeStart({hasCustomFetch:!!P.fetchConnectionMetadata}),u.label=6;case 6:if(u.trys.push([6,12,,13]),!P.fetchConnectionMetadata)return[3,8];return[4,P.fetchConnectionMetadata()];case 7:return c=u.sent(),[3,11];case 8:return s={asViewer:p.asViewer,replId:p.repl.id,isLoggedIn:!!p.currentUser},[4,(0,v.j)()];case 9:return[4,t.apply(void 0,[o._.apply(void 0,[(s.requestedPid2Version=u.sent(),s.format=h.api.token.ReplToken.WireFormat.PROTOBUF,s.overrideClusterMetadata=n,s),b])])];case 10:c=u.sent(),u.label=11;case 11:return[3,13];case 12:if(l=u.sent(),e.aborted)return[2,{error:d.gS.Aborted}];switch(l&&l.statusCode){case 400:case 401:case 403:throw new E.cb(l.statusCode);case 408:case 409:case 429:case 500:case 502:case 503:case 504:case 526:return M.warn("Retriable error while fetching connection metadata",{statusCode:l.statusCode,originalMessage:l.message}),[2,{error:d.gS.Retriable}]}throw l;case 13:if(e.aborted)return[2,{error:d.gS.Aborted}];return F&&C.log("connecting",c),a("fetched connection metadata"),[2,(0,i._)((0,o._)({},c),{error:null})]}})}),function(e){return s.apply(this,arguments)})};N&&N>0&&(W.timeout=N),D?W.WebSocketClass=D:"undefined"==typeof WebSocket&&(W.WebSocketClass=l());var Z=T.now(),J=0;B.open(W,function(e){var n,t=e.channel;F&&C.log("connected",{replId:p.repl.id});var r=t.onCommand(function(e){switch(e.body){case"portOpen":if(!e.portOpen)throw Error("portOpen only handles portOpen commands");var n=!!e.portOpen.forwarded,t=e.portOpen,r=t.address,o=t.cmdline,i=t.cgroup,a=t.pid,c=e.portOpen.port||0;if(8284===c||5901===c)return;A.emit(y.z.PORT_OPEN,{port:c,externalPort:e.portOpen.externalPort,isVnc:c===_,isForwarded:n,address:r,cmdline:o,cgroup:i,pid:a});break;case"portClose":if(!e.portClose)throw Error("portClose only handles portClose commands");var u=e.portClose.port||0,s=e.portClose.address;if(8284===u||5901===u)return;A.emit(y.z.PORT_CLOSE,{port:u,externalPort:e.portClose.externalPort,isVnc:u===_,address:s});break;case"protocolError":x(new m.Z("goval panic").setExtra("message",null!==(l=null===(f=e.protocolError)||void 0===f?void 0:f.text)&&void 0!==l?l:"protocol error"));break;case"toast":var f,l,d,h=null===(d=e.toast)||void 0===d?void 0:d.text;if(!h)break;A.emit(y.z.TOAST,h)}});U({chan0:t,gurl:null===(n=B.getConnectionMetadata())||void 0===n?void 0:n.gurl,isFirst:!0}),window.v6ws=B.ws;var o=T.now()-Z;return M.info("connected to pid1",{time:o,reconnectCount:J,replid:p.repl.id,language:p.repl.language}),function(e){var n=e.willReconnect;if(r(),!n){I=null;return}Z=T.now(),J++}})},openChannel:function(e,n){var t=U(e);return B.openChannel(e,function(e){var r=e.channel.onCommand(function(e){if("protocolError"===e.body){var n,t;x(new m.Z("goval panic").setExtra("message",null!==(t=null===(n=e.protocolError)||void 0===n?void 0:n.text)&&void 0!==t?t:"protocol error"))}}),o=n(e);return void 0!==t&&t.end(),function(e){o&&o(e),r&&r()}})},getConnectionState:function(){return B.getConnectionState()},exec:(0,r._)(function(){var e,n,t,r=arguments;return(0,u.Jh)(this,function(o){for(n=Array(e=r.length),t=0;t<e;t++)n[t]=r[t];return[2,b({client:B,args:n})]})}),execImmediately:(0,r._)(function(){var e,n,t,r=arguments;return(0,u.Jh)(this,function(o){for(n=Array(e=r.length),t=0;t<e;t++)n[t]=r[t];return[2,b({client:B,args:n,noUserEnv:!0})]})}),execWithEnv:(n=(0,r._)(function(e){var n,t,r,o=arguments;return(0,u.Jh)(this,function(i){for(t=Array((n=o.length)>1?n-1:0),r=1;r<n;r++)t[r-1]=o[r];return[2,b({client:B,args:t,env:e})]})}),function(e){return n.apply(this,arguments)}),close:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{expectReconnect:!1};B.getConnectionState()!==y.e.DISCONNECTED&&B.close(e)},destroy:function(){B.destroy(),A.removeAllListeners(),P()},client:function(){return B},focus:function(){var e=B.getChannel(0);e&&e.send({focused:{}})},getConnectionMetadata:function(){return B.getConnectionMetadata()},getContext:function(){return I},getDotdevUrl:function(){var e=B.getConnectionMetadata();if(!e||B.getConnectionState()!==y.e.CONNECTED)throw Error("Cannot get dot dev url when container is not connected");return w(e)},unrecoverableError:function(e,n){B.destroy(),A.removeAllListeners(),x(n?m.Z.wrap(e).setExtras(n):e)}}}},6882:function(e,n,t){"use strict";t.d(n,{Gs:function(){return o},ZP:function(){return l},cb:function(){return d}});var r,o,i=t(90223),a=t(10104),c=t(5093),u=t(8468),s=t(19377);(r=o||(o={})).NotFound="NotFound",r.NotAllowed="NotAllowed",r.ConcurrentReplLimit="ConcurrentReplLimit",r.LanguageTokenDenied="LanguageTokenDenied",r.RequiresRefresh="RequiresRefresh";var f={"repl not found":"NotFound","not allowed to run at this time":"NotAllowed","language tokens are only for logged out people.":"LanguageTokenDenied","user is required to refresh":"RequiresRefresh"};function l(e){var n=!0,t=!1,r=void 0;try{for(var o,i=Object.entries(f)[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var a=(0,c._)(o.value,2),u=a[0],s=a[1];if(e.message.toLowerCase().includes(u))return s}}catch(e){t=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(t)throw r}}return null}var d=function(e){(0,a._)(t,e);var n=(0,s._)(t);function t(e){return(0,i._)(this,t),n.call(this,"user is required to refresh: "+e)}return t}((0,u._)(Error))},68066:function(e,n,t){"use strict";t.d(n,{e:function(){return i.em},z:function(){return o}});var r,o,i=t(22400);(r=o||(o={})).CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",r.PORT_OPEN="PORT_OPEN",r.PORT_CLOSE="PORT_CLOSE",r.TOAST="TOAST"},44816:function(){}}]);
//# sourceMappingURL=3939-535e02bfcaa39292.js.map